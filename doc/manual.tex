% Orpie documentation
\documentclass[11pt,notitlepage]{article}
\usepackage{times}
\usepackage{amsmath}
\usepackage{fullpage}

% End preamble
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\begin{document}
\title{Orpie v1.0 User Manual}
\author{Paul J. Pelzl}
\date{March 4, 2004}
\maketitle

\begin{center}
{\em ``Because the equals key is for the weak.''}
\end{center}


\section{Introduction}
Orpie is a console-based RPN desktop calculator.  The interface is similar to
that of modern Hewlett-Packard${}^{TM}$ calculators, but has been optimized for
efficiency on a PC keyboard.  The design is also influenced to some degree by 
the Mutt email client\footnote{http://www.mutt.org} and the Vim
editor\footnote{http://vim.sf.net}.

Orpie does not have graphing capability, nor does it offer much in the way of a
programming interface; other applications such as GNU
Octave\footnote{http://www.octave.org} are already very effective for such
tasks.  Orpie focuses specifically on helping you to crunch numbers quickly.

Orpie is written in Objective Caml (aka Ocaml)\footnote{http://caml.inria.fr/}, a
high-performance functional programming language with a whole lot of nice
features.  I highly recommend it.

\section{Installation}
This section describes how to install Orpie by compiling from source.

Before installing Orpie, you should have installed the GNU Scientific Library
(GSL)\footnote{http://sources.redhat.com/gsl/} version 1.4 or greater.  You will
also need a curses library (e.g.
ncurses\footnote{http://www.gnu.org/software/ncurses/ncurses.html}), which is
almost certainly already installed on your system.  Finally, Ocaml 3.06 or
higher is required to compile the sources.  You will need the Nums library that
is distributed with Ocaml; at least on Debian, Nums is available as separate
packages {\tt libnums-ocaml} and {\tt libnums-ocaml-dev}.

I will assume you have received this program in the form of a source tarball, 
e.g. ``{\tt orpie-x.x.tar.gz}''.  You have undoubtedly extracted this archive 
already (e.g. using ``{\tt tar xvzf orpie-x.x.tar.gz}'').  Enter the root of 
the Orpie installation directory, e.g. ``{\tt cd orpie-x.x}''.  You can compile
the sources with the following sequence:
\begin{verbatim}
$ ./configure
$ make
\end{verbatim}
Finally, run ``{\tt make install}'' (as root) to install the executables.
``{\tt configure}'' accepts a number of parameters that you can learn about with
``{\tt ./configure --help}''.  Perhaps the most common of these is the {\tt
--prefix} option, which lets you install to a non-standard
directory\footnote{The default installation prefix is {\tt /usr/local}.}.  


\section{Quick Start}
This section describes how to use Orpie in its default configuration.  After
familiarizing yourself with the basic operations as outlined in this section,
you may wish to consult Section \ref{advanced} to see how Orpie can be
configured to better fit your needs.

\subsection{Overview}
You can start the calculator by executing {\tt orpie}.  The interface has two
panels.  The left panel combines status information with context-sensitive help;
the right panel represents the calculator's stack.  (Note that the left panel
will be hidden if Orpie is run in a terminal with less than 80 columns.)

In general, you perform calculations by first entering data on to the stack,
then executing functions that operate on the stack data.  As an example, you can
hit {\tt 1<enter>2<enter>+} in order to add 1 and 2.

\subsection{Entering Data}
\subsubsection{Entering Real Numbers}
To enter a real number, just type the desired digits and hit enter.  The space
bar will begin entry of a scientific notation exponent.  The '{\tt n}' key is used
for negation.  Here are some examples:
\begin{center}
   \begin{tabular}[t]{|r|r|}
      \hline Keypresses & Resulting Entry \\
      \hline
      {\tt 1.23<enter>} & {\tt 1.23} \\
      {\tt 1.23<space>23n<enter>} & {\tt 1.23e-23} \\
      {\tt 1.23n<space>23<enter>} & {\tt -1.23e23} \\
      \hline
   \end{tabular}
\end{center}

\subsubsection{Entering Complex Numbers}
Orpie can represent complex numbers using either cartesian (rectangular) or
polar coordinates.  See Section \ref{rectpolar} to see how to change the
complex number display mode.

A complex number is entered by first pressing '{\tt (}', then entering the real
part, then pressing '{\tt ,}' followed by the imaginary part.  Alternatively, you
can press '{\tt (}' followed by the magnitude, then '{\tt <}' followed by the
phase angle.  The angle will be interpreted in degrees or radians, depending on
the current setting of the angle mode (see Section \ref{anglemode}).  Examples:
\begin{center}
   \begin{tabular}[t]{|r|r|}
      \hline Keypresses & Resulting Entry \\
      \hline
      {\tt (1.23, 4.56<enter>} & {\tt (1.23, 4.56)} \\
      {\tt (0.7072<45<enter>} & {\tt (0.500065915655126, 0.50006591...} \\
      {\tt (1.23n,4.56<space>10<enter>} & {\tt (-1.23, 45600000000)} \\
      \hline
   \end{tabular}
\end{center}

\subsubsection{Entering Matrices}
You can enter matrices by pressing '{\tt [}'.  The elements of the matrix may then be
entered as described in the previous sections, and should be separated using
'{\tt ,}'.  To start a new row of the matrix, press '{\tt [}' again.  On the
stack, each row of the matrix is enclosed in a set of brackets; for example, the
matrix
%BEGIN LATEX
\begin{displaymath}
   \left[
   \begin{matrix}
      1 & 2 \\
      3 & 4
   \end{matrix}
   \right]
\end{displaymath}
%END LATEX
%HEVEA \begin{center}\begin{tabular}{|cc|}1 & 2 \\ 3 & 4 \end{tabular}\end{center}
would appear on the stack as {\tt [[1, 2][3, 4]]}.

Examples of matrix entry:
\begin{center}
   \begin{tabular}[t]{|r|r|}
      \hline Keypresses & Resulting Entry \\
      \hline
      {\tt [1,2[3,4<enter>} & {\tt [[1, 2][3, 4]]} \\
      {\tt [1.2<space>10,0[3n,5n<enter>} & {\tt [[ 12000000000, 0 ][ -3, -5 ]]} \\
      {\tt [(1,2,3,4[5,6,7,8<enter>} & {\tt [[ (1, 2), (3, 4) ][ (5, 6), (...} \\
      \hline
   \end{tabular}
\end{center}

\subsubsection{Entering Integer Constants}
An exact integer may be entered by pressing '{\tt \#}' followed by the desired
digits.  The base of the integer will be assumed to be the same as the current
calculator base mode (see Section \ref{basemode} to see how to set this mode).
Alternatively, the desired base may be specified by pressing space and appending
one of \{{\tt b, o, d, h}\}, to represent binary, octal, decimal, or hexadecimal,
respectively.  On the stack, the representation of the integer will be changed
to match the current base mode.  Examples:
\begin{center}
   \begin{tabular}[t]{|r|r|}
      \hline Keypresses & Resulting Entry \\
      \hline
      {\tt \#123456<enter>} & {\tt \# 123456 d} \\
      {\tt \#ffff<space>h<enter>} & {\tt \# 65535 d} \\
      {\tt \#10101n<space>b<enter>} & {\tt \# -21 d} \\
      \hline
   \end{tabular}
\end{center}

Note that integer constants may have unlimited length, and the basic arithmetic
operations (addition, subtraction, multiplication, division) will be performed
using exact arithmetic when both arguments are integers.

\subsection{Performing Basic Function Operations}
\label{functionops}
Once some data has been entered on the stack, you can apply operations to that
data.  For example, '{\tt +}' will add the last two elements on the stack.  By
default, the following keys have been bound to such operations:
\begin{center}
   \begin{tabular}[t]{|r|l|}
      \hline Keys & Operations \\
      \hline
      {\tt +} & add last two stack elements \\
      {\tt -} & subtract element 1 from element 2 \\
      {\tt *} & multiply last two stack elements \\
      {\tt /} & divide element 2 by element 1 \\
      {\tt \^{}} & raise element 2 to the power of element 1 \\
      {\tt n} & negate last element \\
      {\tt i} & invert last element \\
      {\tt s} & square root function \\
      {\tt a} & absolute value function \\
      {\tt e} & exponential function \\
      {\tt l} & natural logarithm function \\
      {\tt c} & complex conjugate function \\
      {\tt !} & factorial function  \\
      \hline
   \end{tabular}
\end{center}

As a shortcut, function operators will automatically enter any data that you
were in the process of entering.  So instead of the sequence {\tt
2<enter>2<enter>+}, you could type simply {\tt 2<enter>2+} and the second number
would be entered before the addition operation is applied.

\subsection{Performing Extended Function Operations}
\label{extendedfunctions}
One could bind nearly all calculator operations to specific keypresses, but this
would rapidly get confusing since the PC keyboard is not labeled as nicely as a
calculator keyboard is.  For this reason, Orpie includes an {\em extended
command} syntax.

To activate an extended command, press '{\tt '}' (quote key), followed by the
first few letters/digits of the command, then hit enter.  Orpie offers an
autocompletion feature for extended commands, so you only need to type enough of
the command to identify it uniquely.  The matching extended commands will appear
in the left panel of the display, to assist you in finding the appropriate
command.

To avoid interface conflicts, extended commands may be entered only when the
entry buffer (the bottom line of the screen) is empty.

The following functions are available as extended commands:
\begin{center}
   \begin{tabular}[t]{|l|l|}
      \hline Extended Commands & Functions \\
      \hline
      {\tt inv} & inverse function \\
      {\tt pow} & raise element 2 to the power of element 1 \\
      {\tt sq}  & square last element \\
      {\tt sqrt} & square root function \\
      {\tt abs } & absolute value function \\
      {\tt exp } & exponential function \\
      {\tt ln } & natural logarithm function \\
      {\tt 10\^{} } & base 10 exponential function \\
      {\tt log10 } & base 10 logarithm function \\
      {\tt conj } & complex conjugate function \\
      {\tt sin} & sine function \\
      {\tt cos} & cosine function \\
      {\tt tan} & tangent function \\
      {\tt sinh} & hyperbolic sine function \\
      {\tt cosh} & hyperbolic cosine function \\
      {\tt tanh} & hyperbolic tangent function \\
      {\tt asin} & arcsine function \\
      {\tt acos} & arccosine function \\
      {\tt atan} & arctangent function \\
      {\tt asinh} & inverse hyperbolic sine function \\
      {\tt acosh} & inverse hyperbolic cosine function \\
      {\tt atanh} & inverse hyperbolic tangent function \\
      {\tt re} & real part of complex number \\
      {\tt im} & imaginary part of complex number \\
      {\tt gamma} & Euler gamma function \\
      {\tt lngamma} & natural log of Euler gamma function \\
      {\tt erf} & error function \\
      {\tt erfc} & complementary error function \\
      {\tt fact} & factorial function \\
      {\tt add} & add last two elements \\
      {\tt sub} & subtract element 1 from element 2 \\
      {\tt mult} & multiply last two elements \\
      {\tt div} & divide element 2 by element 1 \\
      {\tt neg} & negate last element \\
      \hline
   \end{tabular}
\end{center}

\subsection{Performing Basic Command Operations}
\label{rectpolar}
\label{anglemode}
\label{basemode}
In addition to the function operations listed in Section \ref{functionops},
a number of basic calculator commands have been bound to single keypresses:
\begin{center}
   \begin{tabular}[t]{|r|l|}
      \hline Keys & Operations \\
      \hline
      {\tt $\backslash$} & drop last element \\
      {\tt |} & clear all stack elements \\
      {\tt <pagedown>} & swap last two elements \\
      {\tt <enter>} & duplicate last element (when entry buffer is empty) \\
      {\tt u} & undo last operation \\
      {\tt r} & toggle angle mode between degrees and radians \\
      {\tt p} & toggle complex display mode between rectangular and polar \\
      {\tt b} & cycle base display mode between binary, octal, decimal, hex \\
      {\tt v} & view last stack element in a fullscreen editor \\
      {\tt P} & enter $\pi$ on the stack \\
      {\tt C-L} & refresh the display \\
      {\tt <up>} & begin stack browsing mode \\
      {\tt Q} & quit Orpie \\
      \hline
   \end{tabular}
\end{center}

\subsection{Performing Extended Function Operations}
In addition to the function operations listed in Section
\ref{extendedfunctions}, there are a large number of calculator commands that
have been implemented using the extended command syntax:
\begin{center}
   \begin{tabular}[t]{|l|l|}
      \hline Extended Commands & Calculator Operation \\
      \hline
      {\tt drop} & drop last element \\
      {\tt clear} & clear all stack elements \\
      {\tt swap} & swap last two elements \\
      {\tt dup} & duplicate last element \\
      {\tt undo} & undo last operation \\
      {\tt rad} & set angle mode to radians \\
      {\tt deg} & set angle mode to degrees \\
      {\tt rect} & set complex display mode to rectangular \\
      {\tt polar} & set complex display mode to polar \\
      {\tt bin} & set base display mode to binary \\
      {\tt oct} & set base display mode to octal \\
      {\tt dec} & set base display mode to decimal \\
      {\tt hex} & set base display mode to hexidecimal \\
      {\tt view} & view last stack element in a fullscreen editor \\
      {\tt pi} & enter $\pi$ on the stack \\
      {\tt refresh} & refresh the display \\
      {\tt about} & display a nifty ``About Orpie'' screen \\
      {\tt quit} & quit Orpie \\
      \hline
   \end{tabular}
\end{center}

\subsection{Browsing the Stack}
Orpie offers a {\em stack browsing mode} to assist in viewing and manipulating
stack data.  Press {\tt <up>} to enter stack browsing mode; this should
highlight the last stack element.  You can use the up and down arrow keys to
select different stack elements.  The following keys are useful in stack
browsing mode:
\begin{center}
   \begin{tabular}[t]{|l|l|}
      \hline Keys & Operations \\
      \hline
      {\tt q} & quit stack browsing mode \\
      {\tt <left>} & scroll selected entry to the left \\
      {\tt <right>} & scroll selected entry to the right \\
      {\tt r} & cyclically ``roll'' stack elements downward, below the 
               selected element (inclusive) \\
      {\tt R} & cyclically ``roll'' stack elements upward, below the selected
               element (inclusive) \\
      {\tt v} & view the currently selected element in a fullscreen editor \\
      {\tt <enter>} & duplicate the currently selected element \\
      \hline
   \end{tabular}
\end{center}

The left and right scrolling option may prove useful for viewing very lengthy
stack entries, such as large matrices.

\section{Advanced Configuration}
\label{advanced}
Orpie reads a run-configuration textfile (generally {\tt /etc/orpierc} or
{\tt /usr/local/etc/orpierc}) to determine key and command bindings.  You can
create a personalized configuration file in {\tt \$HOME/.orpierc}, and select
bindings that match your usage patterns.  The recommended procedure is to copy
the {\tt orpierc} file provided with Orpie, and edit it to your needs.

\subsection{{\tt orpierc} Syntax}
You may notice that the  {\tt orpierc} syntax is similar to the syntax used in
the configuration file for the Mutt email client (muttrc).

\subsubsection{Setting Variables}
\label{setvar}
Syntax: {\tt set {\em variable}={\em value\_string}} \\ \\
Several configuration variables can be set using this syntax; see Section \ref{variables}
to see a list.  The variables are unquoted, but the values should be quoted strings.

\subsubsection{Creating Key Bindings}
\label{bindings}
Syntax: {\tt bind {\em key\_identifier operation}} \\ \\
This command will bind a keypress to execute a calculator operation.  The various operations
may be found in Section \ref{operationslist}. Key identifiers may be specified
by strings that represent a single keypress, for example {\tt "m"} (quotes
included).  The key may be prefixed with {\tt "$\backslash\backslash$C"} or
{\tt "$\backslash\backslash$M"} to represent Control or Meta modifiers,
respectively; note that the backslash must be doubled.  A number of special
keys lack single-character representations, so the following strings may be
used to represent them:
\begin{itemize}
   \item {\tt "<esc>"}
   \item {\tt "<tab>"}
   \item {\tt "<enter>"}
   \item {\tt "<return>"}
   \item {\tt "<insert>"}
   \item {\tt "<home>"}
   \item {\tt "<end>"}
   \item {\tt "<pageup>"}
   \item {\tt "<pagedown>"}
   \item {\tt "<space>"}
   \item {\tt "<left>"}
   \item {\tt "<right>"}
   \item {\tt "<up>"}
   \item {\tt "<down>"}
   \item {\tt "<f1>"} to {\tt "<f12>"}
\end{itemize}
Due to differences between various terminal emulators, this key identifier syntax may
not be adequate to describe every keypress.  As a workaround, Orpie will also accept key
identifiers in octal notation.  As an example, you could use {\tt $\backslash$024} 
(do {\em not} enclose it in quotes) to represent Ctrl-T.

\subsubsection{Creating Extended Command Abbreviations}
\label{abbreviations}
Syntax: {\tt abbrev {\em command\_abbreviation operation}} \\ \\
You can use this syntax to set the extended command abbreviations used within
Orpie to represent the various operations.  A list of available operations may be found
in Section \ref{operationslist}.  The command abbreviations should be quoted strings,
for example {\tt "sin"} or {\tt "log"}.

Orpie performs autocompletion on these command abbreviations, allowing you to type
usually just a few letters in order to select the desired command.  The order of the
autocompletion matches will be the same as the order in which the abbreviations are
registered by the rcfile--so you may wish to place the more commonly used command
abbreviations earlier in the list.

\subsection{Configuration Variables}
\label{variables}
The following configuration variables may be set as described in Section \ref{setvar}:
\begin{itemize}
   \item {\tt datafile} \\
      This variable should be set to the full path of the Orpie datafile, which is used
      to save the calculator state.  A tilde prefix will be expanded to the home
      directory.  The default path is \\
      {\tt "\~{}/.orpie/calc\_state"}.
   \item {\tt buffer} \\
      This variable should be set to the full path of a buffer file that Orpie uses
      to pass fullscreen viewing data to the editor of your choice.  The default
      is {\tt "\~{}/.orpie/fullscreen"}.
   \item {\tt editor} \\
      This variable may be set to the fullscreen editor of your choice.  The default
      value is {\tt "vi"}.  It is recommended that you choose an editor that offers
      horizontal scrolling in place of word wrapping, so that the columns of large 
      matrices can be properly aligned.  (The Vim editor could be used in this fashion
      by setting {\tt editor} to {\tt "vim -c 'set nowrap'"}.)
\end{itemize}

\subsection{Calculator Operations}
\label{operationslist}
Every calculator operation can be made available to the interface using the syntax
described in Sections \ref{bindings} and \ref{abbreviations}.  The following is a
list of every available operation.

\subsubsection{Functions}
\label{functions}
The following operations are functions--that is, they will consume at least one
argument from the stack.  Orpie will generally abort the computation and
provide an informative error message if a function cannot be successfully applied (for
example, if you try to compute the transpose of something that is not a matrix).

For the integer constant data type, basic arithmetic operations will yield an exact
integer constant result.  Division of two integer constants will yield the quotient of
the division.  The more complicated functions will generally promote the integer constant
to a real number, and as such the arithmetic will no longer be exact.
\begin{itemize}
   \item {\tt function\_10\_x} \\
      Raise 10 to the power of the last stack element (inverse of function\_log10).
   \item {\tt function\_abs} \\
      Compute the absolute value of the last stack element.
   \item {\tt function\_acos} \\
      Compute the inverse cosine of the last stack element.  For real numbers,
      The result will be provided either in degrees or radians, depending on
      the angle mode of the calculator.
   \item {\tt function\_acosh} \\
      Compute the inverse hyperbolic cosine of the last stack element.
   \item {\tt function\_add} \\
      Add last two stack elements.
   \item {\tt function\_arg} \\
      Compute the argument (phase angle of complex number) of the last stack
      element.  The value will be provided in either degrees or radians,
      depending on the current angle mode of the calculator.
   \item {\tt function\_asin} \\
      Compute the inverse sine of the last stack element.  For real numbers,
      The result will be provided either in degrees or radians, depending on
      the angle mode of the calculator.
   \item {\tt function\_asinh} \\
      Compute the inverse hyperbolic sine of the last stack element.
   \item {\tt function\_atan} \\
      Compute the inverse tangent of the last stack element.  For real numbers,
      The result will be provided either in degrees or radians, depending on
      the angle mode of the calculator.
   \item {\tt function\_atanh} \\
      Compute the inverse hyperbolic tangent of the last stack element.
   \item {\tt function\_cos} \\
      Compute the cosine of the last stack element.  If the argument is real,
      it will be assumed to be either degrees or radians, depending on the
      angle mode of the calculator.
   \item {\tt function\_cosh} \\
      Compute the hyperbolic cosine of the last stack element.
   \item {\tt function\_conj} \\
      Compute the complex conjugate of the last stack element.
   \item {\tt function\_div} \\
      Divide element 2 by element 1.
   \item {\tt function\_erf} \\
      Compute the error function of the last stack element.
   \item {\tt function\_erfc} \\
      Compute the complementary error function of the last stack element.
   \item {\tt function\_exp} \\
      Evaluate the exponential function of the last stack element.
   \item {\tt function\_factorial} \\
      Compute the factorial of the last stack element.  Note: this is not
      exact, even for the integer constant data type.  It is computed using
      an approximation to the gamma function, and therefore is subject to rounding 
      errors.
   \item {\tt function\_gamma} \\
      Compute the Euler gamma function of the last stack element.
   \item {\tt function\_im} \\
      Compute the imaginary part of the last stack element.
   \item {\tt function\_inv} \\
      Compute the multiplicative inverse of the last stack element.
   \item {\tt function\_ln} \\
      Compute the natural logarithm of the last stack element.
   \item {\tt function\_lngamma} \\
      Compute the natural logarithm of the Euler gamma function of the last
      stack element.
   \item {\tt function\_log10} \\
      Compute the base-10 logarithm of the last stack element.
   \item {\tt function\_mult} \\
      Multiply last two stack elements.
   \item {\tt function\_neg} \\
      Negate last stack element.
   \item {\tt function\_pow} \\
      Raise element 2 to the power of element 1.
   \item {\tt function\_re} \\
      Compute the real part of the last stack element.
   \item {\tt function\_sin} \\
      Compute the sine of the last stack element.  If the argument is real, it
      will be assumed to be either degrees or radians, depending on the angle
      mode of the calculator.
   \item {\tt function\_sinh} \\
      Compute the hyperbolic sine of the last stack element.
   \item {\tt function\_sq} \\
      Square the last stack element.
   \item {\tt function\_sqrt} \\
      Compute the square root of the last stack element.
   \item {\tt function\_sub} \\
      Subtract element 1 from element 2.
   \item {\tt function\_tan} \\
      Compute the tangent of the last stack element.  If the argument is real,
      it will be assumed to be either degrees or radians, depending on the
      angle mode of the calculator.
   \item {\tt function\_tanh} \\
      Compute the hyperbolic tangent of the last stack element.
   \item {\tt function\_transpose} \\
      Compute the matrix transpose of the last stack element.
\end{itemize}


\subsubsection{Commands}
\label{commands}
The following operations are referred to as commands; they differ from functions because
they do not take an argument.  Many calculator interface settings are implemented as commands.

\begin{itemize}
   \item {\tt command\_about} \\
      Display a nifty ``about Orpie'' credits screen.
   \item {\tt command\_begin\_browsing} \\
      Enter stack browsing mode.
   \item {\tt command\_begin\_extended} \\
      Begin entry of an extended command abbreviation.
   \item {\tt command\_bin} \\
      Set the base of integer constant representation to 2 (binary).
   \item {\tt command\_clear} \\
      Clear all elements from the stack.
   \item {\tt command\_cycle\_base} \\
      Cycle the base of integer constant representation between 2, 8,
      10, and 16 (bin, oct, dec, and hex).
   \item {\tt command\_dec} \\
      Set the base of integer constant representation to 10 (decimal).
   \item {\tt command\_deg} \\
      Set the angle mode to degrees.
   \item {\tt command\_drop} \\
      Drop the last element off the stack.
   \item {\tt command\_dup} \\
      Duplicate the last stack element.
   \item {\tt command\_enter\_pi} \\
      Enter 3.1415\dots on the stack.
   \item {\tt command\_hex} \\
      Set the base of integer constant representation to 16 (hexadecimal).
   \item {\tt command\_oct} \\
      Set the base of integer constant representation to 8 (octal).
   \item {\tt command\_polar} \\
      Set the complex display mode to polar.
   \item {\tt command\_rad} \\
      Set the angle mode to radians.
   \item {\tt command\_rect} \\
      Set the complex display mode to rectangular (cartesian).
   \item {\tt command\_refresh} \\
      Refresh the display.
   \item {\tt command\_swap} \\
      Swap stack elements 1 and 2.
   \item {\tt command\_quit} \\
      Quit Orpie.
   \item {\tt command\_toggle\_angle\_mode} \\
      Toggle the angle mode between degrees and radians.
   \item {\tt command\_toggle\_complex\_mode} \\
      Toggle the complex display mode between rectangular and polar.
   \item {\tt command\_undo} \\
      Undo the last calculator operation.
   \item {\tt command\_view} \\
      View the last stack element in an external fullscreen editor.
\end{itemize}


\subsubsection{Edit Operations}
\label{edits}
The following operations are related to editing during data entry.  These
commands cannot be made available as extended commands, since extended
commands are not accessible while entering data.  These operations should
be made available as single keypresses using the {\tt bind} keyword.
\begin{itemize}
   \item {\tt edit\_angle} \\
      Begin entering the phase angle of a complex number.  (Orpie will
      assume the angle is in either degrees or radians, depending on
      the current angle mode.)
   \item {\tt edit\_backspace} \\
      Delete the last character entered.
   \item {\tt edit\_begin\_integer} \\
      Begin entering an integer constant.
   \item {\tt edit\_complex} \\
      Begin entering a complex number.
   \item {\tt edit\_enter} \\
      Enter the data that is currently being edited.
   \item {\tt edit\_matrix} \\
      Begin entering a matrix, or begin entering the next
      row of a matrix.
   \item {\tt edit\_minus} \\
      Enter a minus sign in input.
   \item {\tt edit\_scientific\_notation\_base} \\
      Begin entering the scientific notation exponent of a real number,
      or the base of an integer constant.
   \item {\tt edit\_separator} \\
      Begin editing the next element of a complex number or
      matrix.  (This will insert a comma between elements.)
\end{itemize}


\subsubsection{Browsing Operations}
\label{browse}
The following list of operations is available only in stack browsing mode.
As extended commands are unavailable while browsing the stack, these operations
should be bound to single keypresses using the {\tt bind} keyword.
\begin{itemize}
   \item {\tt browse\_echo} \\
      Echo the currently selected element to stack level 1.
   \item {\tt browse\_end} \\
      Exit stack browsing mode.
   \item {\tt browse\_drop} \\
      Drop the currently selected stack element.
   \item {\tt browse\_dropn} \\
      Drop all stack elements below the current selection (inclusive).
   \item {\tt browse\_keep} \\
      Drop all stack elements {\em except} the current selection.  (This is
      complementary to {\tt browse\_drop}.
   \item {\tt browse\_keepn} \\
      Drop all stack elements above the current selection (non-inclusive).  (This
      is complementary to {\tt browse\_dropn}.
   \item {\tt browse\_next\_line} \\
      Move the selection cursor down one line.
   \item {\tt browse\_prev\_line} \\
      Move the selection cursor up one line.
   \item {\tt browse\_rolldown} \\
      Cyclically ``roll'' stack elements downward, below the 
      selected element (inclusive)
   \item {\tt browse\_rollup} \\
      Cyclically ``roll'' stack elements upward, below the selected
      element (inclusive) 
   \item {\tt browse\_scroll\_left} \\
      Scroll the selected element to the left (for viewing very large
      entries such as matrices)
   \item {\tt browse\_scroll\_right} \\
      Scroll the selected element to the right
   \item {\tt browse\_view} \\
      View the currently selected stack element in a fullscreen editor
\end{itemize}



\section{Licensing}
Orpie is Free Software; it has been made available under version 2 of the GNU
General Public License (GPL).  You should have received a copy of the GPL along
with this program, in the file ``COPYING''.


\section{Credits}
Orpie includes portions of the
ocamlgsl\footnote{http://oandrieu.nerim.net/ocaml/gsl/} bindings supplied by
Olivier Andrieu, as well as the curses bindings from the Ocaml Text Mode
Kit\footnote{http://www.nongnu.org/ocaml-tmk/} written by Nicolas George.  I
would like to thank these authors for helping to make Orpie possible.


\section{Frequently Asked Questions}
\begin{enumerate}
   \item {\bf Whatever happened to {\tt rpc}?}

      Over the years I have grown increasingly disenchanted with C++, and
      as a result I lost interest in maintaining rpc.  When I settled on Ocaml
      as a replacement language, I began working on Orpie as a way to improve
      my Ocaml abilities.

   \item {\bf What's wrong with C++?  And what's this Ocaml thing?}

      {\tt <rant>} \\
      C++ has had so many misfeatures bolted on that no one can possibly hold
      the entire syntax in his head at one time.  The syntax itself is horrid,
      especially when dealing with templates.  The ability to use pointers
      presents many opportunities to shoot yourself in the foot.
      Garbage collection and exceptions exist as afterthoughts.  In short, I
      don't think anyone should consider C++ for a project that does not require
      low-level hardware access. \\
      {\tt </rant>} 
     
      I found Ocaml after searching for a Better Language that offers good
      performance.  Ocaml is a functional programming language with a pretty
      syntax, clean design, and all sorts of nice features that one really
      should expect from a modern programming language.  The type-checking 
      compiler is exceedingly strict, and I find that this improves my
      overall productivity by catching a lot of bugs prior to runtime.  Ocaml
      also interfaces with C quite easily, and there are bindings available
      for many commonly used libraries.

   \item {\bf Does Orpie include any enhancements over the old {\tt rpc}?}

      The biggest usability enhancement would be the rcfile for keybindings.
      The context-sensitive help panel is also new.  Integer data may be
      entered and manipulated with arbitrary precision (thanks to the Nums 
      library that ships with Ocaml).  The error messages provided by
      Orpie are, on average, more informative than those provided by rpc;
      this is a direct consequence of Ocaml's excellent exception handling
      support.

      I also believe that Orpie has fewer bugs in the input handler/parser,
      but this remains to be seen.
\end{enumerate}

\section{Contact info}
Orpie author: Paul Pelzl {\tt <pelzlpj@eecs.umich.edu>} \\
Orpie website: {\tt http://www.eecs.umich.edu/\~{}pelzlpj/orpie} \\


\noindent
Feel free to contact me if you have bugs, feature requests, patches, etc.  I 
would also welcome volunteers interested in packaging Orpie for various platforms.

Orpie is developed with the aid of the excellent GNU Arch
RCS\footnote{http://www.gnu.org/software/gnu-arch/}.  Interested 
developers are advised to track Orpie development via my public archive: \\
\hspace*{2cm}{\tt pelzlpj@eecs.umich.edu--2004 $\backslash$ \\
\hspace*{4cm} http://www-personal.engin.umich.edu/\~{}pelzlpj/tla/2004} .  

Do you feel compelled to compensate me for writing Orpie?  As a {\em poor, 
starving} graduate student, I will gratefully accept donations.  Please see \\
{\tt http://www.eecs.umich.edu/\~{}pelzlpj/orpie/donate.html} for more information.
\end{document}


% arch-tag: DO_NOT_CHANGE_db7ed8b2-8ea4-4e32-b0f6-50482487cb00 
